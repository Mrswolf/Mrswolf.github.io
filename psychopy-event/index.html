<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=5,viewport-fit=cover"><title>Psychopy事件响应 | swolf的博客</title><meta name="description" content="Psychopy事件响应 Psychopy提供了很多IO交互方式，当然，最根本的还是键盘和鼠标。本节介绍Psychopy鼠标和键盘的编程技巧。"><meta property="og:type" content="article"><meta property="og:title" content="Psychopy事件响应"><meta property="og:url" content="https://mrswolf.github.io/psychopy-event/index.html"><meta property="og:site_name" content="swolf的博客"><meta property="og:description" content="Psychopy事件响应 Psychopy提供了很多IO交互方式，当然，最根本的还是键盘和鼠标。本节介绍Psychopy鼠标和键盘的编程技巧。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-01-08T09:01:30.000Z"><meta property="article:modified_time" content="2022-06-04T06:56:24.000Z"><meta property="article:author" content="swolf"><meta property="article:tag" content="psychopy"><meta name="twitter:card" content="summary"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><link rel="icon" href="/images/favicon.ico" type="image/x-icon"><meta name="google-site-verification" content="dN2SLd9-x4zqC5VsgpROSppupvj3_eOvkDfKG32YSdc"><meta name="msvalidate.01" content="0735A9B44239360B87417963B55FE980"><link rel="stylesheet" href="/css/iconfont.min.css"><link rel="stylesheet" href="/css/common.min.css"><link href="//cdn.staticfile.org/KaTeX/0.15.6/katex.min.css" rel="stylesheet" crossorigin="anonymous"><script async src="https://www.googletagmanager.com/gtag/js?id=G-2JPFK1G1RZ"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2JPFK1G1RZ")</script><meta name="generator" content="Hexo 6.1.0"></head><body><header class="header header-fixture"><div class="profile-search-wrap flex sm:block"><div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6"><a id="avatar" role="link" href="https://github.com/mrswolf" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_blank" rel="noopener" rel="noreferrer"><img src="/images/avatar.jpg" class="rounded-full" alt="avatar"></a><h2 id="name" class="hidden lg:block">swolf</h2><h3 id="title" class="hidden xl:block">PhD &amp; Engineer &amp; Coder</h3><small id="location" class="hidden lg:block"><i class="iconfont icon-map-icon"></i> Earth, Universe</small></div><div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:mb-4 lg:w-full"><form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200"><div class="input-group table bg-gray-100 lg:bg-white w-full"><input id="search-input" type="text" placeholder="搜索" class="inline-block w-full bg-gray-100 lg:bg-white"> <span class="table-cell"><button name="search tigger button" disabled><i class="iconfont icon-search m-2"></i></button></span></div></form><div id="content-json" data-placeholder="搜索" class="invisible hidden">/content.json</div><script id="search-teamplate" type="text/html" data-path="/content.json"><div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="搜索" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-2 pb-3 mb-1 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            {{/each}}
        </div>
    </div></script></div><button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false"><i class="iconfont icon-hamburger"></i></button></div><nav id="menu-nav" class="hidden sm:flex flex-col"><div class="menu-item menu-home" role="menuitem"><a href="/."><i class="iconfont icon-home" aria-hidden="true"></i> <span class="menu-title">首页</span></a></div><div class="menu-item menu-archives" role="menuitem"><a href="/archives"><i class="iconfont icon-archive" aria-hidden="true"></i> <span class="menu-title">归档</span></a></div><div class="menu-item menu-categories" role="menuitem"><a href="/categories"><i class="iconfont icon-folder" aria-hidden="true"></i> <span class="menu-title">分类</span></a></div><div class="menu-item menu-tags" role="menuitem"><a href="/tags"><i class="iconfont icon-tag" aria-hidden="true"></i> <span class="menu-title">标签</span></a></div><div class="menu-item menu-repository" role="menuitem"><a href="/repository"><i class="iconfont icon-project" aria-hidden="true"></i> <span class="menu-title">项目</span></a></div><div class="menu-item menu-about" role="menuitem"><a href="/about"><i class="iconfont icon-cup" aria-hidden="true"></i> <span class="menu-title">关于</span></a></div><div class="social-links flex sm:flex-col lg:hidden mt-5"><span class="social-item text-center"><a target="_blank" rel="noopener" href="https://github.com/mrswolf"><i class="iconfont social-icon icon-github"></i> <span class="menu-title hidden lg:inline">menu.github</span> </a></span><span class="social-item text-center"><a href="/atom.xml"><i class="iconfont social-icon icon-rss"></i> <span class="menu-title hidden lg:inline">menu.rss</span></a></span></div></nav></header><section class="main-section"><main class="flex-1 px-4 py-14 md:px-5 lg:px-8 lg:py-4 relative min-h-screen"><article class="content article article-archives article-type-list" itemscope><header class="article-header"><h1 itemprop="name text-lg"><a class="article-title" href="/psychopy-event" target="_blank" itemprop="url">Psychopy事件响应</a></h1><p class="article-meta mb-3 text-xs"><span class="article-date"><i class="iconfont icon-calendar-check"></i><time datetime="2019-01-08T09:01:30.000Z" itemprop="datePublished">1月8, 2019</time></span><span class="article-date"><i class="iconfont icon-calendar-check"></i><time datetime="2022-06-04T06:56:24.000Z" itemprop="datePublished">6月4, 2022</time></span><span class="article-category"><i class="iconfont icon-folder"></i> <a class="article-category-link" href="/categories/psychopy%E7%B3%BB%E5%88%97/">psychopy系列</a> </span><span class="article-tags"><i class="iconfont icon-tag"></i> <a class="article-tag-none-link" href="/tags/psychopy/" rel="tag">psychopy</a> </span><span class="_partial/post-comment"><i class="icon icon-comment"></i> <a href="/psychopy-event/#comments" class="article-comment-link">评论 </a></span><span class="post-wordcount" itemprop="wordCount">字数统计: 1.6k(字)</span> <span class="post-readcount" itemprop="timeRequired">阅读时长: 7(分)</span></p></header><div class="marked-body article-body"><h2 id="Psychopy事件响应">Psychopy事件响应</h2><p>Psychopy提供了很多IO交互方式，当然，最根本的还是键盘和鼠标。本节介绍Psychopy鼠标和键盘的编程技巧。<span id="more"></span></p><h3 id="全局按键响应">全局按键响应</h3><p>编写刺激界面免不了要反复调试，要看看字体颜色对不对、图形大小合不合适，一旦发现刺激界面需要改进就得退出程序修改源代码。</p><p>如果采用普通的按键检测方式，则需要在一个循环体内检查按键状态，这显然有可能造成不可知的错误（比如在检测按键前进入一个死循环函数，程序永远无法退出啦），这个时候全局按键响应就很有用了。</p><p>Psychopy用<a target="_blank" rel="noopener" href="https://github.com/psychopy/psychopy/blob/master/psychopy/event.py">psychopy.event.globalkeys</a>来设置全局按键，官方文档里没有如何使用全局按键的说明，但在coder的Demo里有演示global_event_keys.py。</p><p>global_event.keys.py程序注册了三个按键，按键“b”调用python的setattr函数，设置rect对象的填充颜色为蓝色,按键“ctrl”+“r”调用python的setattr函数，设置rect对象的填充颜色为红色。按键“q”调用core.quit方法终止程序退出。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> psychopy <span class="keyword">import</span> core, event, visual, monitors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    mon = monitors.Monitor(</span><br><span class="line">        name=<span class="string">&#x27;my_monitor&#x27;</span>,</span><br><span class="line">        width=<span class="number">53.704</span>,  <span class="comment"># 显示器宽度，单位cm</span></span><br><span class="line">        distance=<span class="number">45</span>,   <span class="comment"># 被试距显示器距离，单位cm</span></span><br><span class="line">        gamma=<span class="literal">None</span>,    <span class="comment"># gamma值</span></span><br><span class="line">        verbose=<span class="literal">False</span>) <span class="comment"># 是否输出详细信息</span></span><br><span class="line">    mon.setSizePix((<span class="number">1920</span>, <span class="number">1080</span>)) <span class="comment"># 设置显示器分辨率</span></span><br><span class="line">    mon.save() <span class="comment"># 保存显示器信息</span></span><br><span class="line"></span><br><span class="line">    win = visual.Window(monitor=mon, size=(<span class="number">800</span>, <span class="number">600</span>), fullscr=<span class="literal">False</span>,</span><br><span class="line">        screen=<span class="number">0</span>, winType=<span class="string">&#x27;pyglet&#x27;</span>, units=<span class="string">&#x27;norm&#x27;</span>, allowGUI=<span class="literal">False</span>)</span><br><span class="line">    rect = visual.Rect(win, fillColor=<span class="string">&#x27;blue&#x27;</span>, pos=(<span class="number">0</span>, -<span class="number">0.2</span>))</span><br><span class="line">    text = visual.TextStim(</span><br><span class="line">        win,</span><br><span class="line">        pos=(<span class="number">0</span>, <span class="number">0.5</span>),</span><br><span class="line">        text=(<span class="string">&#x27;Press\n\n&#x27;</span></span><br><span class="line">              <span class="string">&#x27;B for blue rectangle,\n&#x27;</span></span><br><span class="line">              <span class="string">&#x27;CTRL + R for red rectangle,\n&#x27;</span></span><br><span class="line">              <span class="string">&#x27;Q or ESC to quit.&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Add an event key.</span></span><br><span class="line">    event.globalKeys.add(key=<span class="string">&#x27;b&#x27;</span>, func=<span class="built_in">setattr</span>,</span><br><span class="line">                         func_args=(rect, <span class="string">&#x27;fillColor&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>),</span><br><span class="line">                         name=<span class="string">&#x27;blue rect&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Add an event key with a &quot;modifier&quot; (CTRL).</span></span><br><span class="line">    event.globalKeys.add(key=<span class="string">&#x27;r&#x27;</span>, modifiers=[<span class="string">&#x27;ctrl&#x27;</span>], func=<span class="built_in">setattr</span>,</span><br><span class="line">                         func_args=(rect, <span class="string">&#x27;fillColor&#x27;</span>, <span class="string">&#x27;red&#x27;</span>),</span><br><span class="line">                         name=<span class="string">&#x27;red rect&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Add multiple shutdown keys &quot;at once&quot;.</span></span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> [<span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;escape&#x27;</span>]:</span><br><span class="line">        event.globalKeys.add(key, func=core.quit)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Print all currently defined global event keys.</span></span><br><span class="line">    <span class="built_in">print</span>(event.globalKeys)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">repr</span>(event.globalKeys))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        text.draw()</span><br><span class="line">        rect.draw()</span><br><span class="line">        win.flip()</span><br></pre></td></tr></table></figure><p>以下是event.globalkeys.add()方法的参数介绍<br>event.globalkeys.add(key, func, func_args=(), func_kwargs=None, modifiers=(), name=None)</p><table><thead><tr><th style="text-align:left">parameters</th><th style="text-align:left">type</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left">key</td><td style="text-align:left">string</td><td style="text-align:left">按键字符串</td></tr><tr><td style="text-align:left">func</td><td style="text-align:left">function</td><td style="text-align:left">按键时执行的函数</td></tr><tr><td style="text-align:left">func_args</td><td style="text-align:left">iterable</td><td style="text-align:left">函数的args参数</td></tr><tr><td style="text-align:left">func_kwargs</td><td style="text-align:left">dict</td><td style="text-align:left">函数的kwargs参数</td></tr><tr><td style="text-align:left">modifiers</td><td style="text-align:left">iterable</td><td style="text-align:left">组合按键字符串列表，例如’shift’,‘ctrl’,‘alt’,‘capslock’,'scrollock’等</td></tr><tr><td style="text-align:left">name</td><td style="text-align:left">string</td><td style="text-align:left">按键事件的名称</td></tr></tbody></table><p>此外还有event.globalkeys.remove()方法以移除全局按键<br>event.globalkeys.remove(key, modifiers=())</p><table><thead><tr><th style="text-align:left">parameters</th><th style="text-align:left">type</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left">key</td><td style="text-align:left">string</td><td style="text-align:left">按键字符串</td></tr><tr><td style="text-align:left">modifiers</td><td style="text-align:left">iterable</td><td style="text-align:left">组合按键字符串列表，例如’shift’,‘ctrl’,‘alt’,‘capslock’,'scrollock’等</td></tr></tbody></table><h3 id="等待按键和检测按键">等待按键和检测按键</h3><p>除了全局按键响应，Psychopy还提供了等待按键响应和检测按键响应两种方式。</p><p>以下为等待按键函数event.waitKeys()的演示程序，按’esc’或五次其他按键退出程序。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> psychopy <span class="keyword">import</span> core, event, visual, monitors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    mon = monitors.Monitor(</span><br><span class="line">        name=<span class="string">&#x27;my_monitor&#x27;</span>,</span><br><span class="line">        width=<span class="number">53.704</span>,  <span class="comment"># 显示器宽度，单位cm</span></span><br><span class="line">        distance=<span class="number">45</span>,   <span class="comment"># 被试距显示器距离，单位cm</span></span><br><span class="line">        gamma=<span class="literal">None</span>,    <span class="comment"># gamma值</span></span><br><span class="line">        verbose=<span class="literal">False</span>) <span class="comment"># 是否输出详细信息</span></span><br><span class="line">    mon.setSizePix((<span class="number">1920</span>, <span class="number">1080</span>)) <span class="comment"># 设置显示器分辨率</span></span><br><span class="line">    mon.save() <span class="comment"># 保存显示器信息</span></span><br><span class="line"></span><br><span class="line">    win = visual.Window(monitor=mon, size=(<span class="number">800</span>, <span class="number">600</span>), fullscr=<span class="literal">False</span>,</span><br><span class="line">        screen=<span class="number">0</span>, winType=<span class="string">&#x27;pyglet&#x27;</span>, units=<span class="string">&#x27;norm&#x27;</span>, allowGUI=<span class="literal">False</span>)</span><br><span class="line">    msg = visual.TextStim(win, text=<span class="string">&#x27;press a key\n &lt; esc &gt; to quit&#x27;</span>)</span><br><span class="line">    msg.draw()</span><br><span class="line">    win.flip()</span><br><span class="line"></span><br><span class="line">    k = [<span class="string">&#x27;&#x27;</span>]</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> k[<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;escape&#x27;</span>, <span class="string">&#x27;esc&#x27;</span>] <span class="keyword">and</span> count &lt; <span class="number">5</span>:</span><br><span class="line">        k = event.waitKeys()</span><br><span class="line">        <span class="built_in">print</span>(k)</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    win.close()</span><br><span class="line">    core.quit()</span><br></pre></td></tr></table></figure><p>event.waitKeys()阻塞函数进程直到被试按键，以下是<a target="_blank" rel="noopener" href="http://www.psychopy.org/api/event.html">event.waitKeys()</a>方法的参数介绍<br>event.waitKeys(maxWait=inf, keyList=None, modifiers=False, timeStamped=False, clearEvents=True)</p><table><thead><tr><th style="text-align:left">parameters</th><th style="text-align:left">type</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left">maxWait</td><td style="text-align:left">numeric value</td><td style="text-align:left">最大等待时间，默认为inf</td></tr><tr><td style="text-align:left">keyList</td><td style="text-align:left">iterable</td><td style="text-align:left">指定函数检测的按键名称，函数仅在按指定键时返回</td></tr><tr><td style="text-align:left">modifiers</td><td style="text-align:left">bool</td><td style="text-align:left">如果True，返回(keyname, modifiers)的tuple</td></tr><tr><td style="text-align:left">timeStamped</td><td style="text-align:left">bool</td><td style="text-align:left">如果True，返回(keyname, time)</td></tr><tr><td style="text-align:left">clearEvents</td><td style="text-align:left">bool</td><td style="text-align:left">如果True，在检测新的按键前清理event buffer</td></tr></tbody></table><table><thead><tr><th style="text-align:left">return</th><th style="text-align:left">type</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left">keys</td><td style="text-align:left">iterable</td><td style="text-align:left">按键列表；超时返回None</td></tr></tbody></table><p>等待按键会阻塞进程，Psychopy还提供了另一种非阻塞检测方式<a target="_blank" rel="noopener" href="http://www.psychopy.org/api/event.html">event.getKeys()</a>。</p><p>以下代码如下不断检测按键并输出，直到按’escape’键退出程序。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> psychopy <span class="keyword">import</span> core, event, visual, monitors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    mon = monitors.Monitor(</span><br><span class="line">        name=<span class="string">&#x27;my_monitor&#x27;</span>,</span><br><span class="line">        width=<span class="number">53.704</span>,  <span class="comment"># 显示器宽度，单位cm</span></span><br><span class="line">        distance=<span class="number">45</span>,   <span class="comment"># 被试距显示器距离，单位cm</span></span><br><span class="line">        gamma=<span class="literal">None</span>,    <span class="comment"># gamma值</span></span><br><span class="line">        verbose=<span class="literal">False</span>) <span class="comment"># 是否输出详细信息</span></span><br><span class="line">    mon.setSizePix((<span class="number">1920</span>, <span class="number">1080</span>)) <span class="comment"># 设置显示器分辨率</span></span><br><span class="line">    mon.save() <span class="comment"># 保存显示器信息</span></span><br><span class="line"></span><br><span class="line">    win = visual.Window(monitor=mon, size=(<span class="number">800</span>, <span class="number">600</span>), fullscr=<span class="literal">False</span>,</span><br><span class="line">        screen=<span class="number">0</span>, winType=<span class="string">&#x27;pyglet&#x27;</span>, units=<span class="string">&#x27;norm&#x27;</span>, allowGUI=<span class="literal">False</span>)</span><br><span class="line">    msg = visual.TextStim(win, text=<span class="string">&#x27;press a key\n &lt; esc &gt; to quit&#x27;</span>)</span><br><span class="line">    msg.draw()</span><br><span class="line">    win.flip()</span><br><span class="line"></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        k = event.getKeys()</span><br><span class="line">        <span class="keyword">if</span> k:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;escape&#x27;</span> <span class="keyword">in</span> k:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="built_in">print</span>(k)</span><br><span class="line"></span><br><span class="line">    win.close()</span><br><span class="line">    core.quit()</span><br></pre></td></tr></table></figure><p>以下是<a target="_blank" rel="noopener" href="http://www.psychopy.org/api/event.html">event.getKeys()</a>方法的参数介绍<br>event.getKeys(keyList=None, modifiers=False, timeStamped=False)</p><table><thead><tr><th style="text-align:left">parameters</th><th style="text-align:left">type</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left">keyList</td><td style="text-align:left">iterable</td><td style="text-align:left">指定函数检测的按键名称，函数仅在按指定键时返回</td></tr><tr><td style="text-align:left">modifiers</td><td style="text-align:left">bool</td><td style="text-align:left">如果True，返回(keyname, modifiers)的tuple</td></tr><tr><td style="text-align:left">timeStamped</td><td style="text-align:left">bool</td><td style="text-align:left">如果True，返回(keyname, time)</td></tr></tbody></table><table><thead><tr><th style="text-align:left">return</th><th style="text-align:left">type</th><th style="text-align:left">description</th></tr></thead><tbody><tr><td style="text-align:left">keys</td><td style="text-align:left">iterable</td><td style="text-align:left">按键列表；超时返回None</td></tr></tbody></table><h3 id="鼠标事件">鼠标事件</h3><p>Psychopy提供<a target="_blank" rel="noopener" href="http://www.psychopy.org/api/event.html">event.Mouse</a>类来处理鼠标相关的事件，官方文档对此有详细的介绍。以下的代码显示了一个含有矩形的窗，在矩形内部单击左右键可以改变颜色，而按中央滚轮键则退出程序。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> psychopy <span class="keyword">import</span> core, event, visual, monitors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    mon = monitors.Monitor(</span><br><span class="line">        name=<span class="string">&#x27;my_monitor&#x27;</span>,</span><br><span class="line">        width=<span class="number">53.704</span>,  <span class="comment"># 显示器宽度，单位cm</span></span><br><span class="line">        distance=<span class="number">45</span>,   <span class="comment"># 被试距显示器距离，单位cm</span></span><br><span class="line">        gamma=<span class="literal">None</span>,    <span class="comment"># gamma值</span></span><br><span class="line">        verbose=<span class="literal">False</span>) <span class="comment"># 是否输出详细信息</span></span><br><span class="line">    mon.setSizePix((<span class="number">1920</span>, <span class="number">1080</span>)) <span class="comment"># 设置显示器分辨率</span></span><br><span class="line">    mon.save() <span class="comment"># 保存显示器信息</span></span><br><span class="line"></span><br><span class="line">    win = visual.Window(monitor=mon, size=(<span class="number">800</span>, <span class="number">600</span>), fullscr=<span class="literal">False</span>,</span><br><span class="line">        screen=<span class="number">0</span>, winType=<span class="string">&#x27;pyglet&#x27;</span>, units=<span class="string">&#x27;norm&#x27;</span>, allowGUI=<span class="literal">True</span>)</span><br><span class="line">    rect = visual.Rect(win, fillColor=<span class="string">&#x27;blue&#x27;</span>, pos=(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建Mouse类</span></span><br><span class="line">    mouse = event.Mouse(visible=<span class="literal">True</span>, newPos=(<span class="number">0</span>, <span class="number">0</span>), win=win)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 重置单击事件状态</span></span><br><span class="line">        mouse.clickReset()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 检测左键是否在矩形内单击</span></span><br><span class="line">        <span class="keyword">if</span> mouse.isPressedIn(rect, buttons=[<span class="number">0</span>]):</span><br><span class="line">            rect.fillColor = <span class="string">&#x27;red&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 检测右键是否在矩形内单击</span></span><br><span class="line">        <span class="keyword">if</span> mouse.isPressedIn(rect, buttons=[<span class="number">2</span>]):</span><br><span class="line">            rect.fillColor = <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 检测是否单击滚轮键</span></span><br><span class="line">        <span class="comment"># button1: left click</span></span><br><span class="line">        <span class="comment"># button2: middle click</span></span><br><span class="line">        <span class="comment"># button3: right click</span></span><br><span class="line">        button1, button2, button3 = mouse.getPressed(getTime=<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">if</span> button2:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        rect.draw()</span><br><span class="line">        win.flip()</span><br><span class="line"></span><br><span class="line">    core.quit()</span><br></pre></td></tr></table></figure></div><blockquote class="copyright"><p><strong>本文链接 : </strong><a class="permalink" href="https://mrswolf.github.io/psychopy-event/">https://mrswolf.github.io/psychopy-event/</a></p><p><strong>This article is available under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</a> License</strong></p></blockquote></article></main><aside id="sidebar" class="aside aside-fixture"><div class="toc-sidebar"><nav id="toc" class="article-toc"><h3 class="toc-title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Psychopy%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94"><span class="toc-number">1.</span> <span class="toc-text">Psychopy事件响应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%8C%89%E9%94%AE%E5%93%8D%E5%BA%94"><span class="toc-number">1.1.</span> <span class="toc-text">全局按键响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E6%8C%89%E9%94%AE%E5%92%8C%E6%A3%80%E6%B5%8B%E6%8C%89%E9%94%AE"><span class="toc-number">1.2.</span> <span class="toc-text">等待按键和检测按键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">鼠标事件</span></a></li></ol></li></ol></nav></div></aside></section><footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 lg:w-1/6 bg-gray-100 z-40"><div class="footer-social-links"><a target="_blank" rel="noopener" href="https://github.com/mrswolf"><i class="iconfont icon-github"></i> </a><a href="/atom.xml"><i class="iconfont icon-rss"></i></a></div></footer><div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div><div id="search-view-container" class="hidden shadow-xl"></div><script src="/js/dom-event.min.js"></script><script src="/js/local-search.min.js"></script><script src="//cdn.staticfile.org/lightgallery-js/1.1.3/js/lightgallery.min.js"></script><script src="/js/light-gallery.min.js"></script></body></html>